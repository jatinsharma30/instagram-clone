{% extends 'base.html' %}
{% block css %}
<style>
    * {
        margin: 0px;
        padding: 0;
    }

    .profile-image {
        height: 30vh;
        width: 18vw;
        border-radius: 50%;
        border: 4px solid grey;
    }

    .text-font {
        font-size: 1.3rem;
    }
</style>
{% endblock css %}
{% block body %}

<div class="container">
    <!-- upper part -->
    <div class="row">
        <div class="col-4">

            {% if user.profileImage %}
            <img class="profile-image mx-4" src="{{user.profileImage.url}}" alt="">
            {% else %}
            <img class="profile-image" src="/static/img/profile.png" alt="">
            {% endif %}
        </div>
        <div class="col">
            <div class="row">
                <div class="col">
                    <h1 class="text-center">{{user.username}}</h1>
                </div>
                {% if user == request.user %}
                <div class="col">
                    <a href={% url 'editProfile' %}  class="btn btn-outline-dark btn-lg my-1">Edit
                        Profile</a>
              </div>
                <div class="col">
                    <a href="#">
                        <img class="my-1" src="/static/img/settings-logo.png" alt="">
                    </a>
                </div>
                {% else %}
                <div class="col">
                    <form action={% url 'follow' %} method="post">
                        {% csrf_token %}
                        <input type="hidden" name='user' value="{{user.id}}">
                        {% if status == 'following' %}
                        <button type="submit" name="followStatus" value="Unfollow" class="btn btn-secondary btn-lg my-1">Unfollow</button>
                        {% else %}
                        <button type="submit" name="followStatus" value="follow" class="btn btn-primary btn-lg my-1">Follow</button>
                        {% endif %}
                    </form>
                </div>
                {% endif %}
            </div>
            <div class="row my-4">
                <div class="col text-center">
                    <span class="text-font"><b>{{posts|length}}</b> posts</span>
                </div>
                <div class="col text-center">
                    <span class="text-font"><b>{{ followers.count}}</b> followers</span>
                </div>
                <div class="col text-center">
                    {% if following.follow %}
                    <span class="text-font"><b>{{ following.follow.count }}</b> following</span>
                    {% else %}
                    <span class="text-font"><b>0</b> following</span>

                    {% endif %}
                </div>
            </div>
            <div class="row my-4 ">
                <div class="col-6 text-center">
                    {% if user.discription %}
                    <p class="text-font">{{user.discription}}</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <div style="height: 10px; background-color: #EAEFF5"></div>
    <!-- posts part -->
    <div class="row">
        {% for post in posts %}
        <div class="col-4 my-2">
        <img src="{{post.post.url}}" alt="" height="" style="width:100%; height: 300px;" class="my-2">
    </div>
        {% endfor %}
    </div>
</div>
{% endblock body %}